foreach(what MAJOR MINOR PATCH)
	set(ivar ${PROJECT_NAME}_${what}_VERSION)
	string(TOUPPER ${ivar} ivar)
	set(CPACK_PACKAGE_VERSION_${what} ${${ivar}})
endforeach()

set(CPACK_SOURCE_GENERATOR "TBZ2")
set(CPACK_SOURCE_PACKAGE_FILE_NAME
	"${PROJECT_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}")
string(TOLOWER ${CPACK_SOURCE_PACKAGE_FILE_NAME} CPACK_SOURCE_PACKAGE_FILE_NAME)
set(CPACK_SOURCE_IGNORE_FILES
	"/build*/;/.hg*;~$;CMakeCache.txt;${CPACK_SOURCE_IGNORE_FILES}")
include(CPack)
