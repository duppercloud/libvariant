[
/* These tests where taken verbatim from:
// http://skew.org/uri/uri_tests.html#absoluteizeURI
// They are in the format of reference, base, expected result
// ends in a empty string
These where then modified for the slightly different behavior we want
regarding .. segments.
*/
"","http://example.com/path?query#frag","http://example.com/path?query",
"../c","foo:a/b","foo:c",
"foo:.","foo:a","foo:",
"/foo/../../../bar","zz:abc","zz:/bar",
"/foo/../bar","zz:abc","zz:/bar",
"foo/../../../bar","zz:abc","zz:bar",
"foo/../bar","zz:abc","zz:bar",
"zz:.","zz:abc","zz:",
"/.","http://a/b/c/d;p?q","http://a/",
"/.foo","http://a/b/c/d;p?q","http://a/.foo",
".foo","http://a/b/c/d;p?q","http://a/b/c/.foo",
"g:h","http://a/b/c/d;p?q","g:h",
"g","http://a/b/c/d;p?q","http://a/b/c/g",
"./g","http://a/b/c/d;p?q","http://a/b/c/g",
"g/","http://a/b/c/d;p?q","http://a/b/c/g/",
"/g","http://a/b/c/d;p?q","http://a/g",
"//g","http://a/b/c/d;p?q","http://g",
"?y","http://a/b/c/d;p?q","http://a/b/c/d;p?y",
"g?y","http://a/b/c/d;p?q","http://a/b/c/g?y",
"#s","http://a/b/c/d;p?q","http://a/b/c/d;p?q#s",
"g#s","http://a/b/c/d;p?q","http://a/b/c/g#s",
"g?y#s","http://a/b/c/d;p?q","http://a/b/c/g?y#s",
";x","http://a/b/c/d;p?q","http://a/b/c/;x",
"g;x","http://a/b/c/d;p?q","http://a/b/c/g;x",
"g;x?y#s","http://a/b/c/d;p?q","http://a/b/c/g;x?y#s",
"","http://a/b/c/d;p?q","http://a/b/c/d;p?q",
".","http://a/b/c/d;p?q","http://a/b/c/",
"./","http://a/b/c/d;p?q","http://a/b/c/",
"..","http://a/b/c/d;p?q","http://a/b/",
"../","http://a/b/c/d;p?q","http://a/b/",
"../g","http://a/b/c/d;p?q","http://a/b/g",
"../..","http://a/b/c/d;p?q","http://a/",
"../../","http://a/b/c/d;p?q","http://a/",
"../../g","http://a/b/c/d;p?q","http://a/g",
"../../../g","http://a/b/c/d;p?q","http://a/../g",
"../../../../g","http://a/b/c/d;p?q","http://a/g",
"/./g","http://a/b/c/d;p?q","http://a/g",
"/../g","http://a/b/c/d;p?q","http://a/../g",
"g.","http://a/b/c/d;p?q","http://a/b/c/g.",
".g","http://a/b/c/d;p?q","http://a/b/c/.g",
"g..","http://a/b/c/d;p?q","http://a/b/c/g..",
"..g","http://a/b/c/d;p?q","http://a/b/c/..g",
"./../g","http://a/b/c/d;p?q","http://a/b/g",
"./g/.","http://a/b/c/d;p?q","http://a/b/c/g/",
"g/./h","http://a/b/c/d;p?q","http://a/b/c/g/h",
"g/../h","http://a/b/c/d;p?q","http://a/b/c/h",
"g;x=1/./y","http://a/b/c/d;p?q","http://a/b/c/g;x=1/y",
"g;x=1/../y","http://a/b/c/d;p?q","http://a/b/c/y",
"g?y/./x","http://a/b/c/d;p?q","http://a/b/c/g?y/./x",
"g?y/../x","http://a/b/c/d;p?q","http://a/b/c/g?y/../x",
"g#s/./x","http://a/b/c/d;p?q","http://a/b/c/g#s/./x",
"g#s/../x","http://a/b/c/d;p?q","http://a/b/c/g#s/../x",
"http:g","http://a/b/c/d;p?q","http:g",
"http:","http://a/b/c/d;p?q","http:",
"/a/b/c/./../../g","http://a/b/c/d;p?q","http://a/a/g",
"g","http://a/b/c/d;p?q=1/2","http://a/b/c/g",
"./g","http://a/b/c/d;p?q=1/2","http://a/b/c/g",
"g/","http://a/b/c/d;p?q=1/2","http://a/b/c/g/",
"/g","http://a/b/c/d;p?q=1/2","http://a/g",
"//g","http://a/b/c/d;p?q=1/2","http://g",
"?y","http://a/b/c/d;p?q=1/2","http://a/b/c/d;p?y",
"g?y","http://a/b/c/d;p?q=1/2","http://a/b/c/g?y",
"g?y/./x","http://a/b/c/d;p?q=1/2","http://a/b/c/g?y/./x",
"g?y/../x","http://a/b/c/d;p?q=1/2","http://a/b/c/g?y/../x",
"g#s","http://a/b/c/d;p?q=1/2","http://a/b/c/g#s",
"g#s/./x","http://a/b/c/d;p?q=1/2","http://a/b/c/g#s/./x",
"g#s/../x","http://a/b/c/d;p?q=1/2","http://a/b/c/g#s/../x",
"./","http://a/b/c/d;p?q=1/2","http://a/b/c/",
"../","http://a/b/c/d;p?q=1/2","http://a/b/",
"../g","http://a/b/c/d;p?q=1/2","http://a/b/g",
"../../","http://a/b/c/d;p?q=1/2","http://a/",
"../../g","http://a/b/c/d;p?q=1/2","http://a/g",
"g","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g",
"./g","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g",
"g/","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g/",
"g?y","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g?y",
";x","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/;x",
"g;x","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g;x",
"g;x=1/./y","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/g;x=1/y",
"g;x=1/../y","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/y",
"./","http://a/b/c/d;p=1/2?q","http://a/b/c/d;p=1/",
"../","http://a/b/c/d;p=1/2?q","http://a/b/c/",
"../g","http://a/b/c/d;p=1/2?q","http://a/b/c/g",
"../../","http://a/b/c/d;p=1/2?q","http://a/b/",
"../../g","http://a/b/c/d;p=1/2?q","http://a/b/g",
"g:h","fred:///s//a/b/c","g:h",
"g","fred:///s//a/b/c","fred:///s//a/b/g",
"./g","fred:///s//a/b/c","fred:///s//a/b/g",
"g/","fred:///s//a/b/c","fred:///s//a/b/g/",
"/g","fred:///s//a/b/c","fred:///g",
"//g","fred:///s//a/b/c","fred://g",
"//g/x","fred:///s//a/b/c","fred://g/x",
"///g","fred:///s//a/b/c","fred:///g",
"./","fred:///s//a/b/c","fred:///s//a/b/",
"../","fred:///s//a/b/c","fred:///s//a/",
"../g","fred:///s//a/b/c","fred:///s//a/g",
"../../","fred:///s//a/b/c","fred:///s//",
"../../g","fred:///s//a/b/c","fred:///s//g",
"../../../g","fred:///s//a/b/c","fred:///s/g",
"../../../../g","fred:///s//a/b/c","fred:///g",
"g:h","http:///s//a/b/c","g:h",
"g","http:///s//a/b/c","http:///s//a/b/g",
"./g","http:///s//a/b/c","http:///s//a/b/g",
"g/","http:///s//a/b/c","http:///s//a/b/g/",
"/g","http:///s//a/b/c","http:///g",
"//g","http:///s//a/b/c","http://g",
"//g/x","http:///s//a/b/c","http://g/x",
"///g","http:///s//a/b/c","http:///g",
"./","http:///s//a/b/c","http:///s//a/b/",
"../","http:///s//a/b/c","http:///s//a/",
"../g","http:///s//a/b/c","http:///s//a/g",
"../../","http:///s//a/b/c","http:///s//",
"../../g","http:///s//a/b/c","http:///s//g",
"../../../g","http:///s//a/b/c","http:///s/g",
"../../../../g","http:///s//a/b/c","http:///g",
"bar:abc","foo:xyz","bar:abc",
"../abc","http://example/x/y/z","http://example/x/abc",
"http://example/x/abc","http://example2/x/y/z","http://example/x/abc",
"../r","http://ex/x/y/z","http://ex/x/r",
"q/r","http://ex/x/y","http://ex/x/q/r",
"q/r#s","http://ex/x/y","http://ex/x/q/r#s",
"q/r#s/t","http://ex/x/y","http://ex/x/q/r#s/t",
"ftp://ex/x/q/r","http://ex/x/y","ftp://ex/x/q/r",
"","http://ex/x/y","http://ex/x/y",
"","http://ex/x/y/","http://ex/x/y/",
"","http://ex/x/y/pdq","http://ex/x/y/pdq",
"z/","http://ex/x/y/","http://ex/x/y/z/",
"#Animal","file:/swap/test/animal.rdf","file:/swap/test/animal.rdf#Animal",
"../abc","file:/e/x/y/z","file:/e/x/abc",
"/example/x/abc","file:/example2/x/y/z","file:/example/x/abc",
"../r","file:/ex/x/y/z","file:/ex/x/r",
"/r","file:/ex/x/y/z","file:/r",
"q/r","file:/ex/x/y","file:/ex/x/q/r",
"q/r#s","file:/ex/x/y","file:/ex/x/q/r#s",
"q/r#","file:/ex/x/y","file:/ex/x/q/r#",
"q/r#s/t","file:/ex/x/y","file:/ex/x/q/r#s/t",
"ftp://ex/x/q/r","file:/ex/x/y","ftp://ex/x/q/r",
"","file:/ex/x/y","file:/ex/x/y",
"","file:/ex/x/y/","file:/ex/x/y/",
"","file:/ex/x/y/pdq","file:/ex/x/y/pdq",
"z/","file:/ex/x/y/","file:/ex/x/y/z/",
"file://meetings.example.com/cal#m1","file:/devel/WWW/2000/10/swap/test/reluri-1.n3","file://meetings.example.com/cal#m1",
"file://meetings.example.com/cal#m1","file:/home/connolly/w3ccvs/WWW/2000/10/swap/test/reluri-1.n3","file://meetings.example.com/cal#m1",
"./#blort","file:/some/dir/foo","file:/some/dir/#blort",
"./#","file:/some/dir/foo","file:/some/dir/#",
"./","http://example/x/abc.efg","http://example/x/",
"//example/x/abc","http://example2/x/y/z","http://example/x/abc",
"/r","http://ex/x/y/z","http://ex/r",
"./q:r","http://ex/x/y","http://ex/x/q:r",
"./p=q:r","http://ex/x/y","http://ex/x/p=q:r",
"?pp/rr","http://ex/x/y?pp/qq","http://ex/x/y?pp/rr",
"y/z","http://ex/x/y?pp/qq","http://ex/x/y/z",
"local/qual@domain.org#frag","mailto:local","mailto:local/qual@domain.org#frag",
"more/qual2@domain2.org#frag","mailto:local/qual1@domain1.org","mailto:local/more/qual2@domain2.org#frag",
"y?q","http://ex/x/y?q","http://ex/x/y?q",
"/x/y?q","http://ex?p","http://ex/x/y?q",
"c/d","foo:a/b","foo:a/c/d",
"/c/d","foo:a/b","foo:/c/d",
"","foo:a/b?c#d","foo:a/b?c",
"b/c","foo:a","foo:b/c",
"../b/c","foo:/a/y/z","foo:/a/b/c",
"./b/c","foo:a","foo:b/c",
"/./b/c","foo:a","foo:/b/c",
"../../d","foo://a//b/c","foo://a/d",
".","foo:a","foo:",
"..","foo:a","foo:..",
"abc","http://example/x/y%2Fz","http://example/x/abc",
"../../x%2Fabc","http://example/a/x/y/z","http://example/a/x%2Fabc",
"../x%2Fabc","http://example/a/x/y%2Fz","http://example/a/x%2Fabc",
"abc","http://example/x%2Fy/z","http://example/x%2Fy/abc",
"q%3Ar","http://ex/x/y","http://ex/x/q%3Ar",
"/x%2Fabc","http://example/x/y%2Fz","http://example/x%2Fabc",
"/x%2Fabc","http://example/x/y/z","http://example/x%2Fabc",
"local2@domain2","mailto:local1@domain1?query1","mailto:local2@domain2",
"local2@domain2?query2","mailto:local1@domain1","mailto:local2@domain2?query2",
"local2@domain2?query2","mailto:local1@domain1?query1","mailto:local2@domain2?query2",
"?query2","mailto:local@domain?query1","mailto:local@domain?query2",
"local@domain?query2","mailto:?query1","mailto:local@domain?query2",
"?query2","mailto:local@domain?query1","mailto:local@domain?query2",
"http://example/a/b?c/../d","foo:bar","http://example/a/b?c/../d",
"http://example/a/b#c/../d","foo:bar","http://example/a/b#c/../d",
"http:this","http://example.org/base/uri","http:this",
"http:this","http:base","http:this",
".//g","f:/a","f://g",
"b/c//d/e","f://example.org/base/a","f://example.org/base/b/c//d/e",
"m2@example.ord/c2@example.org","mid:m@example.ord/c@example.org","mid:m@example.ord/m2@example.ord/c2@example.org",
"mini1.xml","file:///C:/DEV/Haskell/lib/HXmlToolbox-3.01/examples/","file:///C:/DEV/Haskell/lib/HXmlToolbox-3.01/examples/mini1.xml",
"../b/c","foo:a/y/z","foo:a/b/c",
"b","foo:","foo:b",
"b","foo://a","foo://a/b",
"b","foo://a?q","foo://a/b",
"b?q","foo://a","foo://a/b?q",
"b?q","foo://a?r","foo://a/b?q",
"", "", ""
]
